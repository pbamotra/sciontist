function r(t){/in/.test(document.readyState)?setTimeout("r("+t+")",9):t()}KudosPlease=function(){function t(t){e=this,this.elements=document.querySelectorAll(t.el),this.status=t.status,this.persistent=void 0!=t.persistent&&t.persistent&&void 0!=localStorage,this.duration=t.duration,this.timer={},this.currentStatus="";for(var s=0;s<this.elements.length;s++){var a=this.elements[s];a.setAttribute("data-id",s),e.request(a,"GET"),0==this.loadAmount(s)?(a.setAttribute("data-amount",0),this.timer[s]=-1,this.isTouch()?(this.on(a,"touchstart",this.enter),this.on(a,"touchend",this.out)):(this.on(a,"mouseover",this.enter),this.on(a,"mouseout",this.out))):this.finish(a)}}var e;return t.prototype.enter=function(t){var s=this,a=-1;e.hasClass(this,"finish")||(e.addClass(s,"active"),a=setTimeout(function(){e.removeClass(s,"active"),e.finish(s,!0)},e.duration),e.timer[s.getAttribute("data-id")]=a)},t.prototype.out=function(t){e.hasClass(this,"finish")||(e.removeClass(this,"active"),clearTimeout(e.timer[this.getAttribute("data-id")]))},t.prototype.finish=function(t,s){e.addClass(t,"finish"),e.changeStatus(t,"gamma"),s=s||!1,amount=e.loadAmount(parseInt(t.getAttribute("data-id"),10)),s&&(++amount,e.request(t,"POST"))},t.prototype.changeStatus=function(t,s){void 0!=e.status&&(e.removeClass(t,e.currentStatus),e.addClass(t,e.status[s]),e.currentStatus=e.status[s])},t.prototype.on=function(t,e,s){try{t.addEventListener(e,s,!1)}catch(a){t.attachEvent("on"+e,s)}},t.prototype.addClass=function(t,e){e=e.split(",");for(var s=0;s<e.length;s++)-1==t.className.indexOf(e[s])&&(t.className=t.className.trim()+" "+e[s])},t.prototype.removeClass=function(t,e){e=e.split(",");for(var s=0;s<e.length;s++)t.className=t.className.replace(e[s],"").trim()},t.prototype.hasClass=function(t,e){for(var s=t.className.split(" "),a=!1,o=0;o<s.length;o++)s[o]==e&&(a=!0);return a},t.prototype.isTouch=function(){return!!("ontouchstart"in window)||!!("onmsgesturechange"in window)},t.prototype.save=function(t,s){e.persistent&&localStorage.setItem("kudos:saved:"+t.getAttribute("data-url"),s)},t.prototype.loadAmount=function(t){var s=e.elements[t].getAttribute("data-amount")||0;return e.persistent&&null!=(amount=localStorage.getItem("kudos:saved:"+e.elements[t].getAttribute("data-url")))&&(s=amount),s},t.prototype.request=function(t,s){var a;try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch(o){a=new XMLHttpRequest}a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){var o=a.responseText;t.setAttribute("data-amount",o),"GET"==s&&(e.changeStatus(t,0==o?"alpha":"beta"),e.persistent&&null!=localStorage.getItem("kudos:saved:"+t.getAttribute("data-url"))&&e.changeStatus(t,"gamma")),"POST"==s&&e.save(t,o)}};var n="?url="+encodeURIComponent(t.getAttribute("data-url"));a.open(s,"http://api.kudosplease.com/"+n,!0),a.send()},"".trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),t}(),r(function(){new KudosPlease({el:".kudos",duration:1500,persistent:!0,status:{alpha:"fontawesome-thumbs-up",beta:"fontawesome-thumbs-up",gamma:"fontawesome-star"}})});
